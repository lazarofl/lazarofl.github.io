<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Extendendo módulos com JavaScript | Lazaro Fernandes Lima Suleiman</title><meta name="description"><meta name="generator" content="Lazaro Fernandes Lima Suleiman"><meta name="author" content="Lazaro Fernandes Lima"><meta name="keywords" content="sjaak van den berg, svdb, bitcoin, crypto, payment, integration, bitcoins, wordpress, betaling, webshop, front end, design, ontwerp, developer"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><a href="/"><img src="/images/svdb.png" alt="Lazaro Fernandes Lima Suleiman" title="Lazaro Fernandes Lima Suleiman"></a><h1><a href="/" alt="Lazaro Fernandes Lima Suleiman" title="Lazaro Fernandes Lima Suleiman" itemprop="headline">Lazaro Fernandes Lima Suleiman</a></h1><p itemprop="description">head of technology at <a href='https://hondana.com.br'>@Hondana</a></p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="Home" title="Home" itemprop="url">Home</a></li><li itemprop="name"><a href="/articles" alt="Articles" title="Articles" itemprop="url">Articles</a></li><li itemprop="name"><a href="/about" alt="About" title="About" itemprop="url">About</a></li></ul></nav><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">Extendendo módulos com JavaScript</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2015-06-25T18:26:34.000Z"> Thursday, June 25th 2015 at 15:26</time><br>Last updated on<time itemprop="dateModified" datetime="2015-06-25T18:26:34.000Z"> Thursday, November 14th 2019 at 12:52</time></span><p>No post anterior falei um pouco sobre como <a href="/2015/06/23/Desenvolvendo-modulos-com-JavaScript/" title="desenvolver módulos em javascript">desenvolver módulos em javascript</a>, nesta parte vou falar sobre como adicionar ou sobrescrever funcionalidades dos seus módulos e como você pode montar um bom framework a partir deste conceito.</p>
<h3 id="Criando-um-framework-de-metodos-utilitarios"><a href="#Criando-um-framework-de-metodos-utilitarios" class="headerlink" title="Criando um framework de métodos utilitários"></a>Criando um framework de métodos utilitários</h3><p>Um bom exemplo é aquele arquivo <code>utils.js</code> que muitos criam para colocar todas as funções utilitárias.</p>
<p>Como forma de exemplificar, vamos criar um <strong>framework utilitário</strong> com o nome de <code>superUtils</code>, iremos usar um caractere simples para servir de alias, que tal <code>_u</code>? Logo, iremos extender nosso framework com módulos que serão “plugados” nele.</p>
<p>Imagine aqui que você pode utilizar esse mesmo conceito para montar uma boa arquitetura para algum componente ou plugin javascript que você esteja construindo.</p>
<h5 id="O-modulo-principal"><a href="#O-modulo-principal" class="headerlink" title="O módulo principal"></a>O módulo principal</h5><figure class="highlight javascript"><figcaption><span>superUtils/_u.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _u = &#123;&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>O módulo principal armazena constantes e funções utilizadas pelos demais módulos, no nosso caso o módulo principal possui apenas a variável sem nenhuma estrutura interna, o próximo passo é criar módulos que extendem as funcionalidades do <code>superUtils.js</code>.</p>
<figure class="highlight javascript"><figcaption><span>superUtils/alerta.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">_u</span>)</span>&#123;</span><br><span class="line">  _u.alerta = <span class="function"><span class="keyword">function</span>(<span class="params">mensagem</span>)</span>&#123;</span><br><span class="line">    alert(mensagem);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(_u);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>superUtils/alerta2.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">_u</span>)</span>&#123;</span><br><span class="line">  _u.alerta2 = <span class="function"><span class="keyword">function</span>(<span class="params">mensagem</span>)</span>&#123;</span><br><span class="line">    alert(<span class="string">'alerta 2: '</span> + mensagem);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(_u);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><figcaption><span>pagina.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"superUtils/_u.js"</span>/&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"superUtils/alerta.js"</span>/&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"superUtils/alerta2.js"</span>/&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span></span><br><span class="line"><span class="actionscript">  _u.alerta(<span class="string">"teste"</span>);</span></span><br><span class="line"><span class="actionscript">  _u.alerta2(<span class="string">"teste2"</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>No post anterior ou comentei que iríamos falar sobre essa parte final da estrutura do módulo, que recebe o <code>_u</code> como um parâmetro, <strong>ela permite que ocorra a extensibilidade</strong>, pois envia o objeto para o contexto interno da function, permitindo a sua sobrescrita ou extensão.</p>
<p>#####Criando mocks para alguns dos módulos</p>
<p>Digamos que no seu ambiente de teste alguns dos módulos do <code>superUtils</code> fazem chamadas para uma API via ajax e que você queira alterar esse comportamento para que ele apenas retorne a situação de sucesso, uma forma de fazer isso é criando módulos que sobrescrevem outros módulos.</p>
<figure class="highlight javascript"><figcaption><span>superUtils/verificaCEP.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">_u</span>)</span>&#123;</span><br><span class="line">  _u.verificaCEP = <span class="function"><span class="keyword">function</span>(<span class="params">cep, callback</span>)</span>&#123;</span><br><span class="line">    $.ajax(<span class="string">'//suaAPI/verificaCEP/'</span> + cep, callback);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(_u);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>superUtils/verificaCEPMock.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">_u</span>)</span>&#123;</span><br><span class="line">  _u.verificaCEP = <span class="function"><span class="keyword">function</span>(<span class="params">cep, callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cepFake = &#123;</span><br><span class="line">      endereco: <span class="string">"rua teste"</span>,</span><br><span class="line">      bairro: <span class="string">"bairro fake"</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    callback(cepFake);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)(_u);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><figcaption><span>pagina.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"superUtils/_u.js"</span>/&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"superUtils/alerta.js"</span>/&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"superUtils/verificaCEP.js"</span>/&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"superUtils/verificaCEPMock.js"</span>/&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span></span><br><span class="line"><span class="actionscript">  _u.verificaCEP(<span class="string">"09000-000"</span>, <span class="function"><span class="keyword">function</span><span class="params">(cep)</span></span>&#123;</span></span><br><span class="line">    _u.alerta(cep.endereco);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é isso galera, vou tentar falar sobre o <a href="http://requirejs.org/" target="_blank" rel="noopener">Require.JS</a> no próximo post e como ele pode nos ajudar a carregar os módulos e organizar as dependências entre os módulos de uma forma mais saudável para a sua aplicação, até mais.</p>
</article><section id="comments"><h2>Comments<div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus</a>.</noscript></div></h2></section></main><script async>(function(h,g,l,k,j,i){j=h.createElement(g),i=h.getElementsByTagName(g)[0],
j.src = '//' + l + '.disqus.com/' + k + '.js', i.parentNode.insertBefore(j, i)})
(document,'script','lazarolima','embed');
</script><script async>var disqus_shortname = 'lazarolima';
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = '//' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
}());
</script></body></html>