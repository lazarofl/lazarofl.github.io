<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Implementando Som Espacial no Microsoft Hololens | Lazaro Fernandes Lima Suleiman</title><meta name="description"><meta name="generator" content="Lazaro Fernandes Lima Suleiman"><meta name="author" content="Lazaro Fernandes Lima"><meta name="keywords" content="sjaak van den berg, svdb, bitcoin, crypto, payment, integration, bitcoins, wordpress, betaling, webshop, front end, design, ontwerp, developer"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><a href="/"><img src="/images/svdb.png" alt="Lazaro Fernandes Lima Suleiman" title="Lazaro Fernandes Lima Suleiman"></a><h1><a href="/" alt="Lazaro Fernandes Lima Suleiman" title="Lazaro Fernandes Lima Suleiman" itemprop="headline">Lazaro Fernandes Lima Suleiman</a></h1><p itemprop="description">head of technology at <a href='https://hondana.com.br'>@Hondana</a></p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="articles" title="articles" itemprop="url">articles</a></li></ul></nav><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">Implementando Som Espacial no Microsoft Hololens</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2018-05-02T13:25:32.000Z"> Wednesday, May 2nd 2018 at 10:25</time><br>Last updated on<time itemprop="dateModified" datetime="2018-05-02T13:25:32.000Z"> Thursday, November 14th 2019 at 12:52</time></span><blockquote>
<p>Hologramas são objetos feitos de luz e <strong>som</strong>.</p>
</blockquote>
<p>A maior parte das aplicações não necessita de sons. Quantas vezes você se preocupou sobre que tipo de som deve ser emitido quando o usuário realiza uma operação? Contudo, essa não é a realidade quando desenvolvemos aplicativos para Hololens e para os demais devices de realidade mista disponíveis no mercado. No mundo real, tudo que fazemos emite som e ao desenvolver aplicativos de realidade mista precisamos fazer o mesmo.</p>
<p>Neste post falo sobre a importância desse aspecto no desenvolvimento de aplicações para a família Windows Mixed Reality.</p>
<hr>
<h1 id="Spatial-Sound-Som-Espacial"><a href="#Spatial-Sound-Som-Espacial" class="headerlink" title="Spatial Sound - Som Espacial"></a>Spatial Sound - Som Espacial</h1><p>Uma pessoa falando, um lápis caindo da mesa, um carro acelerando, todos esses sons partem de um ponto e geram uma onda sonora que nos atinge. Quando se trata de identificar um som a reação natural das pessoas é virar a cabeça na direção do som para localizá-lo e compreendê-lo, bem como andar ao redor do local para identificar se estão se aproximando ou se afastando do som.</p>
<p>A experiência que temos no mundo real ao lidar com sons é bem diferente da que temos ao escutar uma música ou mesmo dentro de jogos digitais, neste contexto, simular todos estes efeitos sonoros pode ser bem trabalhoso ou mesmo inviável para uma aplicação mais simples.</p>
<p>Felizmente o Hololens cuida de todos os aspectos citados acima de forma nativa, através do <strong>som espacial</strong>, facilitando a vida dos desenvolvedores e criando efeitos sonoros com base na física de som do mundo real. </p>
<p>O som espacial é um conjunto de técnicas e filtros relacionados a <a href="https://en.wikipedia.org/wiki/Sound_localization" target="_blank" rel="noopener">localização sonora</a> o qual foram implementados em um <a href="https://developer.microsoft.com/en-us/windows/mixed-reality/spatial_sound#simulating_the_perceived_location_and_distance_of_sounds" target="_blank" rel="noopener">HRFT - Head Related Transfer Function</a>. Projeto este desenvolvido pelo time de pesquisa do Hololens que, em conjunto com os sensores de compreensão e mapeamento do ambiente, simulam a física de som do mundo real.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/aB3TDjYklmo?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

<p>Basicamente, precisamos apenas utilizar arquivos de áudio em formato <strong>mono</strong> e o Hololens cuida de toda a simulação da física de som durante a execução do aplicativo.</p>
<h1 id="Importancia-do-som-em-apps-de-realidade-mista"><a href="#Importancia-do-som-em-apps-de-realidade-mista" class="headerlink" title="Importância do som em apps de realidade mista"></a>Importância do som em apps de realidade mista</h1><p>Ao criar aplicativos para realidade mista é importante lembrar que o campo de visão do dispositivo - assim como o campo de visão dos nossos olhos - nem sempre estará exibindo todos os objetos do ambiente, uma vez que objetos podem ser adicionados dinâmicamente ou mesmo por outra pessoa utilizando <a href="https://developer.microsoft.com/en-us/windows/mixed-reality/shared_experiences_in_mixed_reality" target="_blank" rel="noopener">Shared Holograms</a>, logo, podemos utilizar sons para direcionar a atenção para outro local. Vale lembrar aqui que o uso de alertas visuais para direcionar o usuário para outro local via óculos de realidade virtual ou mista podem causar náuseas, com sons não temos este problema :)</p>
<p>Outro aspecto que vale ressaltar é a <strong>simulação da física</strong>, pois, no mundo real, todos os objetos emitem sons quando sofrem algum tipo de interação e utilizamos esses sons para validar ações e compreender o objeto, como por exemplo, se trata-se de um objeto oco, metálico e etc.</p>
<p>Considerar esses aspectos ao desenvolver os hologramas que farão parte do aplicativo traz uma diferença enorme na experiência de uso do mesmo.</p>
<blockquote>
<h1 id="Dica-sobre-o-formato-de-arquivos-de-audio"><a href="#Dica-sobre-o-formato-de-arquivos-de-audio" class="headerlink" title="Dica sobre o formato de arquivos de áudio"></a>Dica sobre o formato de arquivos de áudio</h1><p>Em aplicativos para realidade mista nós <strong>não utilizamos som stereo</strong> apenas <strong>mono</strong> com o Som Espacial sendo aplicado automaticamente e simulando a saída correta em cada orelha. A razão para tal é que no mundo real os sons não são emitidos em modo <em>stereo</em> - com um canal de aúdio para o lado esquerdo e outro para o lado direito - e sim em formato <strong>mono</strong>, onde o som é emitido como uma onda a partir de um ponto específico do ambiente.</p>
<p>Se você utilizar arquivos em formato <strong>stereo</strong> eles irão apenas ocupar mais espaço no aplicativo.</p>
</blockquote>
<h1 id="Criando-o-projeto-no-Unity"><a href="#Criando-o-projeto-no-Unity" class="headerlink" title="Criando o projeto no Unity"></a>Criando o projeto no Unity</h1><p>Iremos utilizar o <em>HoloToolkit</em> para inserir o <em>prefab</em> de camera e um script que utilizaremos mais a frente, portanto, importe a versão mais atualizada do <em>HoloToolkit</em> e adicione ao projeto.</p>
<p>Estou utilizando a versão <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/releases/download/2017.2.1.4/HoloToolkit-Unity-2017.2.1.4.unitypackage" target="_blank" rel="noopener">2017.2.1.4 Patch Release</a>.</p>
<h3 id="Configuracao-para-habilitar-som-espacial-no-Unity"><a href="#Configuracao-para-habilitar-som-espacial-no-Unity" class="headerlink" title="Configuração para habilitar som espacial no Unity"></a>Configuração para habilitar som espacial no Unity</h3><p>Para que a <em>Unity</em> utilize som espacial precisamos habilitar o uso do <strong>HTRF</strong>, citado anteriormente, através da aba:</p>
<blockquote>
<p>Edit &gt; Project Settings &gt; Audio</p>
</blockquote>
<p>Em seguida selecione o plugin <code>MS HTRF Spatializer</code>.</p>
<p><a href="edit-settings.PNG"><img src="edit-settings.PNG" alt="Project Settings"></a></p>
<p>Com esta configuração você agora poderá habilitar o uso de som espacial em qualquer fonte de audio que esteja associada a um <em>Game Object</em> na sua aplicação.</p>
<p><a href="spatialize-setting.PNG"><img src="spatialize-setting.PNG" alt="Spatialize Setting"></a></p>
<h3 id="Adicionando-som-ao-seu-holograma"><a href="#Adicionando-som-ao-seu-holograma" class="headerlink" title="Adicionando som ao seu holograma"></a>Adicionando som ao seu holograma</h3><p>Crie um <em>Game Object</em> e, dentro dele, importe ou crie um modelo 3D para o seu projeto.</p>
<p>Para facilitar, eu irei utilizar um modelo 3D de um telefone. Você pode baixar esse modelo gratuitamente a partir da Unity Store em:</p>
<p><a href="https://assetstore.unity.com/packages/3d/old-telephone-62434" target="_blank" rel="noopener">https://assetstore.unity.com/packages/3d/old-telephone-62434</a></p>
<p>Adicione ao <code>Game Object</code> os seguintes componentes:</p>
<ul>
<li>Audio Source</li>
<li>Audio Emitter (componente do HoloToolkit)</li>
</ul>
<p>O <a href="https://docs.unity3d.com/Manual/class-AudioSource.html" target="_blank" rel="noopener">Audio Source</a> é o componente que executa o som a partir de um arquivo de audio, além de possuir diversos controles e configurações que podemos alterar em tempo de execução.</p>
<p>Aplique um arquivo de áudio para o telefone e certifique-se de que as opções abaixo estejam definidas:</p>
<ul>
<li>Spatial Blend = <strong>1</strong></li>
<li>Spatialize = <strong>true</strong></li>
</ul>
<p>Você pode obter <em>assets</em> de audio gratuitamente em <a href="freesound.org">freesound.org</a>.</p>
<p>Eu irei utilizar o arquivo de áudio abaixo para simular o telefone tocando.</p>
<p><a href="https://freesound.org/s/342167/" target="_blank" rel="noopener">https://freesound.org/s/342167/</a></p>
<p>O <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/blob/84493c975fbf0fe0f3541303ce1758ca11dfe44a/Assets/HoloToolkit/SpatialSound/Scripts/AudioEmitter.cs" target="_blank" rel="noopener">Audio Emitter</a> é um componente do <em>HoloToolkit</em> que analisa continuamente o ambiente e altera o som de acordo com a sua movimentação ao redor do ambiente e também dá suporte a oclusão, abafando o som caso outros objetos (físicos ou virtuais) estejam entre o usuário e o nosso telefone. Basicamente, ele altera o som de acordo com a influência que o ambiente ao redor possui, da mesma forma que a física de som do mundo real.</p>
<p><a href="audio-setup.PNG"><img src="audio-setup.PNG" alt="Audio Setup"></a></p>
<h1 id="Conclusao"><a href="#Conclusao" class="headerlink" title="Conclusão"></a>Conclusão</h1><p>Este post foi uma introdução ao tema de aúdio em aplicativos de realidae mista, existem vários outros aspectos e técnicas que podemos utilizar, como por exemplo programar oclusão dinamicamente, programar efeitos sonoros de baixa e alta fidelidade, alterar a configuração do tamanho do ambiente, o qual afeta como o som deve ser emitido e etc.</p>
<p>Espero que o post tenha ajudado, até mais.</p>
<h1 id="Links-uteis"><a href="#Links-uteis" class="headerlink" title="Links úteis"></a>Links úteis</h1><ul>
<li><a href="https://www.engadget.com/2016/11/02/microsoft-exclusive-hololens-spatial-sound/" target="_blank" rel="noopener">Matéria sensacional sobre o time de pesquisadores do Som Espacial na Microsoft</a></li>
<li><a href="https://developer.microsoft.com/en-us/windows/mixed-reality/spatial_sound_design" target="_blank" rel="noopener">https://developer.microsoft.com/en-us/windows/mixed-reality/spatial_sound_design</a></li>
<li><a href="https://developer.microsoft.com/en-us/windows/mixed-reality/spatial_sound" target="_blank" rel="noopener">https://developer.microsoft.com/en-us/windows/mixed-reality/spatial_sound</a></li>
<li><a href="https://docs.microsoft.com/en-us/windows/mixed-reality/holograms-220#chapter-3---spatial-sound-and-spatial-mapping" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/windows/mixed-reality/holograms-220#chapter-3---spatial-sound-and-spatial-mapping</a></li>
</ul>
</article><section id="comments"><h2>Comments<div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus</a>.</noscript></div></h2></section></main><script async>(function(h,g,l,k,j,i){j=h.createElement(g),i=h.getElementsByTagName(g)[0],
j.src = '//' + l + '.disqus.com/' + k + '.js', i.parentNode.insertBefore(j, i)})
(document,'script','lazarolima','embed');
</script><script async>var disqus_shortname = 'lazarolima';
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = '//' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(s);
}());
</script></body></html>